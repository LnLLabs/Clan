{"version":3,"file":"index.mjs","sources":["../src/hooks/useWalletBalance.ts","../src/hooks/useWalletUtxos.ts","../src/hooks/useSendTransaction.ts"],"sourcesContent":["import { useQuery, UseQueryResult } from '@tanstack/react-query';\r\nimport { WalletInterface } from '@clan/framework-core';\r\n\r\nexport interface UseWalletBalanceOptions {\r\n  walletId: string;\r\n  refetchInterval?: number;\r\n  enabled?: boolean;\r\n}\r\n\r\n/**\r\n * React Query hook for fetching and caching wallet balance\r\n * @param wallet - Wallet instance implementing WalletInterface\r\n * @param options - Configuration options\r\n * @returns React Query result with balance data\r\n */\r\nexport const useWalletBalance = (\r\n  wallet: WalletInterface,\r\n  options: UseWalletBalanceOptions\r\n): UseQueryResult<Record<string, bigint>, Error> => {\r\n  const { walletId, refetchInterval = 10000, enabled = true } = options;\r\n\r\n  return useQuery({\r\n    queryKey: ['wallet', walletId, 'balance'],\r\n    queryFn: async () => {\r\n      return await wallet.getBalance();\r\n    },\r\n    refetchInterval,\r\n    enabled,\r\n  });\r\n};\r\n\r\n","import { useQuery, UseQueryResult } from '@tanstack/react-query';\r\nimport { WalletInterface } from '@clan/framework-core';\r\n\r\nexport interface UseWalletUtxosOptions {\r\n  walletId: string;\r\n  refetchInterval?: number;\r\n  enabled?: boolean;\r\n}\r\n\r\n/**\r\n * React Query hook for fetching and caching wallet UTXOs\r\n * @param wallet - Wallet instance implementing WalletInterface\r\n * @param options - Configuration options\r\n * @returns React Query result with UTXOs array\r\n */\r\nexport const useWalletUtxos = (\r\n  wallet: WalletInterface,\r\n  options: UseWalletUtxosOptions\r\n): UseQueryResult<any[], Error> => {\r\n  const { walletId, refetchInterval = 10000, enabled = true } = options;\r\n\r\n  return useQuery({\r\n    queryKey: ['wallet', walletId, 'utxos'],\r\n    queryFn: async () => {\r\n      return await wallet.getUtxos();\r\n    },\r\n    refetchInterval,\r\n    enabled,\r\n  });\r\n};\r\n\r\n","import { useMutation, useQueryClient, UseMutationResult } from '@tanstack/react-query';\r\nimport { WalletInterface } from '@clan/framework-core';\r\n\r\nexport interface SendTransactionParams {\r\n  recipientAddress: string;\r\n  assets: Record<string, bigint>;\r\n  options?: any;\r\n}\r\n\r\nexport interface SendTransactionResult {\r\n  txHash: string;\r\n  draft: any;\r\n  signedTx: any;\r\n}\r\n\r\nexport interface UseSendTransactionOptions {\r\n  walletId: string;\r\n  onSuccess?: (data: SendTransactionResult) => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * React Query mutation hook for sending transactions\r\n * Automatically invalidates balance, UTXOs, and transaction cache on success\r\n * @param wallet - Wallet instance implementing WalletInterface\r\n * @param options - Configuration options\r\n * @returns React Query mutation result\r\n */\r\nexport const useSendTransaction = (\r\n  wallet: WalletInterface,\r\n  options: UseSendTransactionOptions\r\n): UseMutationResult<SendTransactionResult, Error, SendTransactionParams> => {\r\n  const { walletId, onSuccess, onError } = options;\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ recipientAddress, assets, options: txOptions }: SendTransactionParams) => {\r\n      // Create transaction draft\r\n      const draft = await wallet.createTransaction(\r\n        [{ address: recipientAddress, assets }],\r\n        txOptions\r\n      );\r\n\r\n      // Sign transaction\r\n      const signedTx = await wallet.signTransaction(draft);\r\n\r\n      // Submit to blockchain\r\n      const txHash = await wallet.submitTransaction(signedTx);\r\n\r\n      return { txHash, draft, signedTx };\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      // Automatically invalidate related queries to trigger refetch\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'balance'] });\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'utxos'] });\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'transactions'] });\r\n\r\n      // Call custom success handler\r\n      onSuccess?.(data);\r\n    },\r\n\r\n    onError: (error: Error) => {\r\n      // Call custom error handler\r\n      onError?.(error);\r\n    },\r\n  });\r\n};\r\n\r\n"],"names":["useWalletBalance","wallet","options","walletId","refetchInterval","enabled","useQuery","useWalletUtxos","useSendTransaction","onSuccess","onError","queryClient","useQueryClient","useMutation","recipientAddress","assets","txOptions","draft","signedTx","data","error"],"mappings":";AAeO,MAAMA,IAAmB,CAC9BC,GACAC,MACkD;AAClD,QAAM,EAAE,UAAAC,GAAU,iBAAAC,IAAkB,KAAO,SAAAC,IAAU,OAASH;AAE9D,SAAOI,EAAS;AAAA,IACd,UAAU,CAAC,UAAUH,GAAU,SAAS;AAAA,IACxC,SAAS,YACA,MAAMF,EAAO,WAAA;AAAA,IAEtB,iBAAAG;AAAA,IACA,SAAAC;AAAA,EAAA,CACD;AACH,GCdaE,IAAiB,CAC5BN,GACAC,MACiC;AACjC,QAAM,EAAE,UAAAC,GAAU,iBAAAC,IAAkB,KAAO,SAAAC,IAAU,OAASH;AAE9D,SAAOI,EAAS;AAAA,IACd,UAAU,CAAC,UAAUH,GAAU,OAAO;AAAA,IACtC,SAAS,YACA,MAAMF,EAAO,SAAA;AAAA,IAEtB,iBAAAG;AAAA,IACA,SAAAC;AAAA,EAAA,CACD;AACH,GCDaG,IAAqB,CAChCP,GACAC,MAC2E;AAC3E,QAAM,EAAE,UAAAC,GAAU,WAAAM,GAAW,SAAAC,EAAA,IAAYR,GACnCS,IAAcC,EAAA;AAEpB,SAAOC,EAAY;AAAA,IACjB,YAAY,OAAO,EAAE,kBAAAC,GAAkB,QAAAC,GAAQ,SAASC,QAAuC;AAE7F,YAAMC,IAAQ,MAAMhB,EAAO;AAAA,QACzB,CAAC,EAAE,SAASa,GAAkB,QAAAC,GAAQ;AAAA,QACtCC;AAAA,MAAA,GAIIE,IAAW,MAAMjB,EAAO,gBAAgBgB,CAAK;AAKnD,aAAO,EAAE,QAFM,MAAMhB,EAAO,kBAAkBiB,CAAQ,GAErC,OAAAD,GAAO,UAAAC,EAAA;AAAA,IAC1B;AAAA,IAEA,WAAW,CAACC,MAAS;AAEnB,MAAAR,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUR,GAAU,SAAS,GAAG,GAC3EQ,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUR,GAAU,OAAO,GAAG,GACzEQ,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUR,GAAU,cAAc,GAAG,GAGhFM,KAAA,QAAAA,EAAYU;AAAA,IACd;AAAA,IAEA,SAAS,CAACC,MAAiB;AAEzB,MAAAV,KAAA,QAAAA,EAAUU;AAAA,IACZ;AAAA,EAAA,CACD;AACH;"}