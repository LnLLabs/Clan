{"version":3,"file":"index.mjs","sources":["../src/hooks/useWalletBalance.ts","../src/hooks/useWalletUtxos.ts","../src/hooks/useSendTransaction.ts","../src/hooks/useDelegateStake.ts","../src/hooks/useWalletDelegation.ts","../src/hooks/useWithdrawRewards.ts","../src/components/TransactionCreatorWithData.tsx","../src/components/WalletDelegationWithData.tsx"],"sourcesContent":["import { useQuery, UseQueryResult } from '@tanstack/react-query';\nimport { WalletInterface, Assets } from '@clan/framework-core';\n\nexport interface UseWalletBalanceOptions {\n  refetchInterval?: number;\n  enabled?: boolean;\n}\n\n/**\n * React Query hook for fetching and caching wallet balance\n * @param wallet - Wallet instance implementing WalletInterface\n * @param options - Configuration options\n * @returns React Query result with balance data\n */\nexport const useWalletBalance = (\n  wallet: WalletInterface,\n  options: UseWalletBalanceOptions = {}\n): UseQueryResult<Assets, Error> => {\n  const { refetchInterval = 10000, enabled = true } = options;\n  const walletId = wallet.getName(); // Derive from wallet\n\n  return useQuery({\n    queryKey: ['wallet', walletId, 'balance'],\n    queryFn: async () => {\n      return await wallet.getBalance();\n    },\n    refetchInterval,\n    enabled,\n  });\n};\n\n","import { useQuery, UseQueryResult } from '@tanstack/react-query';\nimport { WalletInterface, UTxO } from '@clan/framework-core';\n\nexport interface UseWalletUtxosOptions {\n  refetchInterval?: number;\n  enabled?: boolean;\n}\n\n/**\n * React Query hook for fetching and caching wallet UTXOs\n * @param wallet - Wallet instance implementing WalletInterface\n * @param options - Configuration options\n * @returns React Query result with UTXOs array\n */\nexport const useWalletUtxos = (\n  wallet: WalletInterface,\n  options: UseWalletUtxosOptions = {}\n): UseQueryResult<UTxO[], Error> => {\n  const { refetchInterval = 10000, enabled = true } = options;\n  const walletId = wallet.getName(); // Derive from wallet\n\n  return useQuery({\n    queryKey: ['wallet', walletId, 'utxos'],\n    queryFn: async () => {\n      return await wallet.getUtxos();\n    },\n    refetchInterval,\n    enabled,\n  });\n};\n\n","import { useMutation, useQueryClient, UseMutationResult } from '@tanstack/react-query';\nimport { WalletInterface } from '@clan/framework-core';\n\nexport interface SendTransactionParams {\n  recipientAddress: string;\n  assets: Record<string, bigint>;\n  options?: any;\n}\n\nexport interface SendTransactionResult {\n  txHash: string;\n  draft: any;\n  signedTx: any;\n}\n\nexport interface UseSendTransactionOptions {\n  onSuccess?: (data: SendTransactionResult) => void;\n  onError?: (error: Error) => void;\n}\n\n/**\n * React Query mutation hook for sending transactions\n * Automatically invalidates balance, UTXOs, and transaction cache on success\n * @param wallet - Wallet instance implementing WalletInterface\n * @param options - Configuration options\n * @returns React Query mutation result\n */\nexport const useSendTransaction = (\n  wallet: WalletInterface,\n  options: UseSendTransactionOptions = {}\n): UseMutationResult<SendTransactionResult, Error, SendTransactionParams> => {\n  const { onSuccess, onError } = options;\n  const walletId = wallet.getName(); // Derive from wallet\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ recipientAddress, assets, options: txOptions }: SendTransactionParams) => {\n      // Create transaction draft\n      const draft = await wallet.createTransaction(\n        [{ address: recipientAddress, assets }],\n        txOptions\n      );\n\n      // Sign transaction\n      const signedTx = await wallet.signTransaction(draft);\n\n      // Submit to blockchain\n      const txHash = await wallet.submitTransaction(signedTx);\n\n      return { txHash, draft, signedTx };\n    },\n\n    onSuccess: (data) => {\n      // Automatically invalidate related queries to trigger refetch\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'balance'] });\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'utxos'] });\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'transactions'] });\n\n      // Call custom success handler\n      onSuccess?.(data);\n    },\n\n    onError: (error: Error) => {\n      // Call custom error handler\n      onError?.(error);\n    },\n  });\n};\n\n","import { useMutation, useQueryClient, UseMutationResult } from '@tanstack/react-query';\nimport { WalletInterface } from '@clan/framework-core';\n\nexport interface DelegateStakeParams {\n  poolId: string;\n}\n\nexport interface DelegateStakeResult {\n  txHash: string;\n  poolId: string;\n}\n\nexport interface UseDelegateStakeOptions {\n  onSuccess?: (data: DelegateStakeResult) => void;\n  onError?: (error: Error) => void;\n}\n\n/**\n * React Query mutation hook for delegating stake to a pool\n * Automatically invalidates balance and delegation info on success\n * @param wallet - Wallet instance implementing WalletInterface\n * @param options - Configuration options\n * @returns React Query mutation result\n */\nexport const useDelegateStake = (\n  wallet: WalletInterface,\n  options: UseDelegateStakeOptions = {}\n): UseMutationResult<DelegateStakeResult, Error, DelegateStakeParams> => {\n  const { onSuccess, onError } = options;\n  const walletId = wallet.getName();\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ poolId }: DelegateStakeParams) => {\n      if (!wallet.createDelegationTransaction) {\n        throw new Error('Wallet does not support delegation transactions');\n      }\n\n      // Create delegation transaction\n      const draft = await wallet.createDelegationTransaction(poolId);\n\n      // Sign transaction\n      const signedTx = await wallet.signTransaction(draft);\n\n      // Submit to blockchain\n      const txHash = await wallet.submitTransaction(signedTx);\n\n      return { txHash, poolId };\n    },\n\n    onSuccess: (data) => {\n      // Automatically invalidate related queries to trigger refetch\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'balance'] });\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'delegation'] });\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'transactions'] });\n\n      // Call custom success handler\n      onSuccess?.(data);\n    },\n\n    onError: (error: Error) => {\n      // Call custom error handler\n      onError?.(error);\n    },\n  });\n};\n\n","import { useQuery, UseQueryResult } from '@tanstack/react-query';\nimport { WalletInterface, DelegationInfo } from '@clan/framework-core';\n\nexport interface UseWalletDelegationOptions {\n  refetchInterval?: number;\n  enabled?: boolean;\n}\n\n/**\n * React Query hook for fetching and caching wallet delegation info\n * @param wallet - Wallet instance implementing WalletInterface\n * @param options - Configuration options\n * @returns React Query result with delegation info\n */\nexport const useWalletDelegation = (\n  wallet: WalletInterface,\n  options: UseWalletDelegationOptions = {}\n): UseQueryResult<DelegationInfo | undefined, Error> => {\n  const { refetchInterval = 30000, enabled = true } = options;\n  const walletId = wallet.getName();\n\n  return useQuery({\n    queryKey: ['wallet', walletId, 'delegation'],\n    queryFn: async () => {\n      if (!wallet.getDelegationInfo) {\n        return undefined;\n      }\n      return await wallet.getDelegationInfo();\n    },\n    refetchInterval,\n    enabled,\n  });\n};\n\n","import { useMutation, useQueryClient, UseMutationResult } from '@tanstack/react-query';\nimport { WalletInterface } from '@clan/framework-core';\n\nexport interface WithdrawRewardsResult {\n  txHash: string;\n  amount: bigint;\n}\n\nexport interface UseWithdrawRewardsOptions {\n  onSuccess?: (data: WithdrawRewardsResult) => void;\n  onError?: (error: Error) => void;\n}\n\n/**\n * React Query mutation hook for withdrawing staking rewards\n * Automatically invalidates balance and delegation info on success\n * @param wallet - Wallet instance implementing WalletInterface\n * @param options - Configuration options\n * @returns React Query mutation result\n */\nexport const useWithdrawRewards = (\n  wallet: WalletInterface,\n  options: UseWithdrawRewardsOptions = {}\n): UseMutationResult<WithdrawRewardsResult, Error, void> => {\n  const { onSuccess, onError } = options;\n  const walletId = wallet.getName();\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async () => {\n      if (!wallet.withdrawRewards) {\n        throw new Error('Wallet does not support reward withdrawal');\n      }\n\n      // Get current delegation info to get reward amount\n      const delegationInfo = wallet.getDelegationInfo ? await wallet.getDelegationInfo() : undefined;\n      const amount = delegationInfo?.rewards || 0n;\n\n      // Create withdrawal transaction\n      const draft = await wallet.withdrawRewards();\n\n      // Sign transaction\n      const signedTx = await wallet.signTransaction(draft);\n\n      // Submit to blockchain\n      const txHash = await wallet.submitTransaction(signedTx);\n\n      return { txHash, amount };\n    },\n\n    onSuccess: (data) => {\n      // Automatically invalidate related queries to trigger refetch\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'balance'] });\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'delegation'] });\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'transactions'] });\n\n      // Call custom success handler\n      onSuccess?.(data);\n    },\n\n    onError: (error: Error) => {\n      // Call custom error handler\n      onError?.(error);\n    },\n  });\n};\n\n","import React from 'react';\nimport { WalletInterface, MetadataProvider } from '@clan/framework-core';\nimport type { TransactionBuildOptions } from '@clan/framework-core';\nimport { TransactionCreator } from '@clan/framework-components';\n\nexport interface TransactionCreatorWithDataProps {\n  wallet: WalletInterface;\n  metadataProvider?: MetadataProvider;\n  onTransactionCreated?: (options: TransactionBuildOptions) => void;\n  onCancel?: () => void;\n  className?: string;\n}\n\n/**\n * Backwards compatible wrapper that forwards props to the enhanced TransactionCreator.\n * \n * @example\n * // Simple usage (no metadata)\n * <TransactionCreatorWithData \n *   wallet={wallet}\n *   onTransactionCreated={(tx) => console.log('Created!', tx)}\n * />\n * \n * @example\n * // With metadata provider (BroClan integration)\n * <TransactionCreatorWithData \n *   wallet={wallet}\n *   metadataProvider={broClanMetadataProvider}\n *   onTransactionCreated={(tx) => console.log('Created!', tx)}\n * />\n */\nexport const TransactionCreatorWithData: React.FC<TransactionCreatorWithDataProps> = ({\n  wallet,\n  metadataProvider,\n  ...props\n}) => {\n  return (\n    <TransactionCreator\n      wallet={wallet}\n      metadataProvider={metadataProvider}\n      {...props}\n    />\n  );\n};\n\n","import React from 'react';\nimport { WalletDelegation, DelegationInfo as ComponentDelegationInfo } from '@clan/framework-components';\nimport { WalletInterface } from '@clan/framework-core';\nimport { useDelegateStake } from '../hooks/useDelegateStake';\nimport { useWalletDelegation } from '../hooks/useWalletDelegation';\nimport { useWithdrawRewards } from '../hooks/useWithdrawRewards';\n\nexport interface WalletDelegationWithDataProps {\n  wallet: WalletInterface;\n  onSuccess?: (action: 'delegate' | 'undelegate' | 'withdraw', data: any) => void;\n  onError?: (error: Error) => void;\n  className?: string;\n}\n\n/**\n * Smart wrapper around WalletDelegation that automatically manages delegation state\n * Uses React Query hooks for data fetching and mutations\n * \n * @example\n * ```tsx\n * <WalletDelegationWithData \n *   wallet={wallet}\n *   onSuccess={(action, data) => {\n *     console.log(`${action} successful:`, data);\n *   }}\n *   onError={(error) => {\n *     console.error('Delegation error:', error);\n *   }}\n * />\n * ```\n */\nexport const WalletDelegationWithData: React.FC<WalletDelegationWithDataProps> = ({\n  wallet,\n  onSuccess,\n  onError,\n  className\n}) => {\n  // Fetch delegation info\n  const { data: delegationInfo, isLoading: delegationLoading } = useWalletDelegation(wallet, {\n    refetchInterval: 30000,\n    enabled: true\n  });\n\n  // Delegation mutation\n  const { mutateAsync: delegateStake, isPending: isDelegating } = useDelegateStake(wallet, {\n    onSuccess: (data: any) => {\n      console.log('Delegation successful:', data);\n      onSuccess?.('delegate', data);\n    },\n    onError: (error: Error) => {\n      console.error('Delegation failed:', error);\n      onError?.(error);\n    }\n  });\n\n  // Withdraw rewards mutation\n  const { mutateAsync: withdrawRewards, isPending: isWithdrawing } = useWithdrawRewards(wallet, {\n    onSuccess: (data: any) => {\n      console.log('Withdrawal successful:', data);\n      onSuccess?.('withdraw', data);\n    },\n    onError: (error: Error) => {\n      console.error('Withdrawal failed:', error);\n      onError?.(error);\n    }\n  });\n\n  // Convert DelegationInfo from core to component format\n  const componentDelegationInfo: ComponentDelegationInfo | undefined = delegationInfo ? {\n    stakeAddress: delegationInfo.stakeAddress,\n    delegatedPool: delegationInfo.delegatedPool,\n    delegatedDRep: (delegationInfo as any).delegatedDRep, // May not exist in older core types\n    rewards: delegationInfo.rewards,\n    activeEpoch: delegationInfo.activeEpoch,\n    nextRewardEpoch: delegationInfo.nextRewardEpoch\n  } : undefined;\n\n  // Handle delegation - now accepts both pool and dRep\n  const handleDelegate = async (poolId: string | null, drepId: string | null) => {\n    // Delegate to pool if provided\n    if (poolId) {\n      await delegateStake({ poolId });\n    }\n    // TODO: Add dRep delegation when supported by the hooks\n    // if (drepId) {\n    //   await delegateDRep({ drepId });\n    // }\n    console.log('Delegation requested - Pool:', poolId, 'dRep:', drepId);\n  };\n\n  // Handle undelegation (delegate to null pool or use specific undelegate method if available)\n  const handleUndelegate = async () => {\n    // Note: Implement based on your blockchain's undelegation mechanism\n    // For Cardano, you might need a specific undelegate transaction\n    console.log('Undelegate not yet implemented');\n    onError?.(new Error('Undelegate functionality not yet implemented'));\n  };\n\n  // Handle reward withdrawal\n  const handleWithdrawRewards = async () => {\n    await withdrawRewards();\n  };\n\n  if (delegationLoading) {\n    return <div className=\"delegation-loading\">Loading delegation info...</div>;\n  }\n\n  return (\n    <WalletDelegation\n      wallet={wallet}\n      delegationInfo={componentDelegationInfo}\n      onDelegate={handleDelegate}\n      onUndelegate={handleUndelegate}\n      onWithdrawRewards={handleWithdrawRewards}\n      isDelegating={isDelegating}\n      isWithdrawing={isWithdrawing}\n      className={className}\n    />\n  );\n};\n\nexport default WalletDelegationWithData;\n\n"],"names":["useWalletBalance","wallet","options","refetchInterval","enabled","walletId","useQuery","useWalletUtxos","useSendTransaction","onSuccess","onError","queryClient","useQueryClient","useMutation","recipientAddress","assets","txOptions","draft","signedTx","data","error","useDelegateStake","poolId","useWalletDelegation","useWithdrawRewards","delegationInfo","amount","TransactionCreatorWithData","metadataProvider","props","jsx","TransactionCreator","WalletDelegationWithData","className","delegationLoading","delegateStake","isDelegating","withdrawRewards","isWithdrawing","componentDelegationInfo","handleDelegate","drepId","handleUndelegate","handleWithdrawRewards","WalletDelegation"],"mappings":";;;AAcO,MAAMA,IAAmB,CAC9BC,GACAC,IAAmC,OACD;AAClC,QAAM,EAAE,iBAAAC,IAAkB,KAAO,SAAAC,IAAU,OAASF,GAC9CG,IAAWJ,EAAO,QAAA;AAExB,SAAOK,EAAS;AAAA,IACd,UAAU,CAAC,UAAUD,GAAU,SAAS;AAAA,IACxC,SAAS,YACA,MAAMJ,EAAO,WAAA;AAAA,IAEtB,iBAAAE;AAAA,IACA,SAAAC;AAAA,EAAA,CACD;AACH,GCfaG,IAAiB,CAC5BN,GACAC,IAAiC,OACC;AAClC,QAAM,EAAE,iBAAAC,IAAkB,KAAO,SAAAC,IAAU,OAASF,GAC9CG,IAAWJ,EAAO,QAAA;AAExB,SAAOK,EAAS;AAAA,IACd,UAAU,CAAC,UAAUD,GAAU,OAAO;AAAA,IACtC,SAAS,YACA,MAAMJ,EAAO,SAAA;AAAA,IAEtB,iBAAAE;AAAA,IACA,SAAAC;AAAA,EAAA,CACD;AACH,GCFaI,IAAqB,CAChCP,GACAC,IAAqC,OACsC;AAC3E,QAAM,EAAE,WAAAO,GAAW,SAAAC,EAAA,IAAYR,GACzBG,IAAWJ,EAAO,QAAA,GAClBU,IAAcC,EAAA;AAEpB,SAAOC,EAAY;AAAA,IACjB,YAAY,OAAO,EAAE,kBAAAC,GAAkB,QAAAC,GAAQ,SAASC,QAAuC;AAE7F,YAAMC,IAAQ,MAAMhB,EAAO;AAAA,QACzB,CAAC,EAAE,SAASa,GAAkB,QAAAC,GAAQ;AAAA,QACtCC;AAAA,MAAA,GAIIE,IAAW,MAAMjB,EAAO,gBAAgBgB,CAAK;AAKnD,aAAO,EAAE,QAFM,MAAMhB,EAAO,kBAAkBiB,CAAQ,GAErC,OAAAD,GAAO,UAAAC,EAAA;AAAA,IAC1B;AAAA,IAEA,WAAW,CAACC,MAAS;AAEnB,MAAAR,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,SAAS,GAAG,GAC3EM,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,OAAO,GAAG,GACzEM,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,cAAc,GAAG,GAGhFI,KAAA,QAAAA,EAAYU;AAAA,IACd;AAAA,IAEA,SAAS,CAACC,MAAiB;AAEzB,MAAAV,KAAA,QAAAA,EAAUU;AAAA,IACZ;AAAA,EAAA,CACD;AACH,GC3CaC,IAAmB,CAC9BpB,GACAC,IAAmC,OACoC;AACvE,QAAM,EAAE,WAAAO,GAAW,SAAAC,EAAA,IAAYR,GACzBG,IAAWJ,EAAO,QAAA,GAClBU,IAAcC,EAAA;AAEpB,SAAOC,EAAY;AAAA,IACjB,YAAY,OAAO,EAAE,QAAAS,QAAkC;AACrD,UAAI,CAACrB,EAAO;AACV,cAAM,IAAI,MAAM,iDAAiD;AAInE,YAAMgB,IAAQ,MAAMhB,EAAO,4BAA4BqB,CAAM,GAGvDJ,IAAW,MAAMjB,EAAO,gBAAgBgB,CAAK;AAKnD,aAAO,EAAE,QAFM,MAAMhB,EAAO,kBAAkBiB,CAAQ,GAErC,QAAAI,EAAA;AAAA,IACnB;AAAA,IAEA,WAAW,CAACH,MAAS;AAEnB,MAAAR,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,SAAS,GAAG,GAC3EM,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,YAAY,GAAG,GAC9EM,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,cAAc,GAAG,GAGhFI,KAAA,QAAAA,EAAYU;AAAA,IACd;AAAA,IAEA,SAAS,CAACC,MAAiB;AAEzB,MAAAV,KAAA,QAAAA,EAAUU;AAAA,IACZ;AAAA,EAAA,CACD;AACH,GCnDaG,IAAsB,CACjCtB,GACAC,IAAsC,OACgB;AACtD,QAAM,EAAE,iBAAAC,IAAkB,KAAO,SAAAC,IAAU,OAASF,GAC9CG,IAAWJ,EAAO,QAAA;AAExB,SAAOK,EAAS;AAAA,IACd,UAAU,CAAC,UAAUD,GAAU,YAAY;AAAA,IAC3C,SAAS,YAAY;AACnB,UAAKJ,EAAO;AAGZ,eAAO,MAAMA,EAAO,kBAAA;AAAA,IACtB;AAAA,IACA,iBAAAE;AAAA,IACA,SAAAC;AAAA,EAAA,CACD;AACH,GCZaoB,IAAqB,CAChCvB,GACAC,IAAqC,OACqB;AAC1D,QAAM,EAAE,WAAAO,GAAW,SAAAC,EAAA,IAAYR,GACzBG,IAAWJ,EAAO,QAAA,GAClBU,IAAcC,EAAA;AAEpB,SAAOC,EAAY;AAAA,IACjB,YAAY,YAAY;AACtB,UAAI,CAACZ,EAAO;AACV,cAAM,IAAI,MAAM,2CAA2C;AAI7D,YAAMwB,IAAiBxB,EAAO,oBAAoB,MAAMA,EAAO,sBAAsB,QAC/EyB,KAASD,KAAA,gBAAAA,EAAgB,YAAW,IAGpCR,IAAQ,MAAMhB,EAAO,gBAAA,GAGrBiB,IAAW,MAAMjB,EAAO,gBAAgBgB,CAAK;AAKnD,aAAO,EAAE,QAFM,MAAMhB,EAAO,kBAAkBiB,CAAQ,GAErC,QAAAQ,EAAA;AAAA,IACnB;AAAA,IAEA,WAAW,CAACP,MAAS;AAEnB,MAAAR,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,SAAS,GAAG,GAC3EM,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,YAAY,GAAG,GAC9EM,EAAY,kBAAkB,EAAE,UAAU,CAAC,UAAUN,GAAU,cAAc,GAAG,GAGhFI,KAAA,QAAAA,EAAYU;AAAA,IACd;AAAA,IAEA,SAAS,CAACC,MAAiB;AAEzB,MAAAV,KAAA,QAAAA,EAAUU;AAAA,IACZ;AAAA,EAAA,CACD;AACH,GClCaO,IAAwE,CAAC;AAAA,EACpF,QAAA1B;AAAA,EACA,kBAAA2B;AAAA,EACA,GAAGC;AACL,MAEI,gBAAAC;AAAA,EAACC;AAAA,EAAA;AAAA,IACC,QAAA9B;AAAA,IACA,kBAAA2B;AAAA,IACC,GAAGC;AAAA,EAAA;AAAA,GCTGG,IAAoE,CAAC;AAAA,EAChF,QAAA/B;AAAA,EACA,WAAAQ;AAAA,EACA,SAAAC;AAAA,EACA,WAAAuB;AACF,MAAM;AAEJ,QAAM,EAAE,MAAMR,GAAgB,WAAWS,EAAA,IAAsBX,EAAoBtB,GAAQ;AAAA,IACzF,iBAAiB;AAAA,IACjB,SAAS;AAAA,EAAA,CACV,GAGK,EAAE,aAAakC,GAAe,WAAWC,EAAA,IAAiBf,EAAiBpB,GAAQ;AAAA,IACvF,WAAW,CAACkB,MAAc;AACxB,cAAQ,IAAI,0BAA0BA,CAAI,GAC1CV,KAAA,QAAAA,EAAY,YAAYU;AAAA,IAC1B;AAAA,IACA,SAAS,CAACC,MAAiB;AACzB,cAAQ,MAAM,sBAAsBA,CAAK,GACzCV,KAAA,QAAAA,EAAUU;AAAA,IACZ;AAAA,EAAA,CACD,GAGK,EAAE,aAAaiB,GAAiB,WAAWC,EAAA,IAAkBd,EAAmBvB,GAAQ;AAAA,IAC5F,WAAW,CAACkB,MAAc;AACxB,cAAQ,IAAI,0BAA0BA,CAAI,GAC1CV,KAAA,QAAAA,EAAY,YAAYU;AAAA,IAC1B;AAAA,IACA,SAAS,CAACC,MAAiB;AACzB,cAAQ,MAAM,sBAAsBA,CAAK,GACzCV,KAAA,QAAAA,EAAUU;AAAA,IACZ;AAAA,EAAA,CACD,GAGKmB,IAA+Dd,IAAiB;AAAA,IACpF,cAAcA,EAAe;AAAA,IAC7B,eAAeA,EAAe;AAAA,IAC9B,eAAgBA,EAAuB;AAAA;AAAA,IACvC,SAASA,EAAe;AAAA,IACxB,aAAaA,EAAe;AAAA,IAC5B,iBAAiBA,EAAe;AAAA,EAAA,IAC9B,QAGEe,IAAiB,OAAOlB,GAAuBmB,MAA0B;AAE7E,IAAInB,KACF,MAAMa,EAAc,EAAE,QAAAb,GAAQ,GAMhC,QAAQ,IAAI,gCAAgCA,GAAQ,SAASmB,CAAM;AAAA,EACrE,GAGMC,IAAmB,YAAY;AAGnC,YAAQ,IAAI,gCAAgC,GAC5ChC,KAAA,QAAAA,EAAU,IAAI,MAAM,8CAA8C;AAAA,EACpE,GAGMiC,IAAwB,YAAY;AACxC,UAAMN,EAAA;AAAA,EACR;AAEA,SAAIH,IACK,gBAAAJ,EAAC,OAAA,EAAI,WAAU,sBAAqB,UAAA,8BAA0B,IAIrE,gBAAAA;AAAA,IAACc;AAAA,IAAA;AAAA,MACC,QAAA3C;AAAA,MACA,gBAAgBsC;AAAA,MAChB,YAAYC;AAAA,MACZ,cAAcE;AAAA,MACd,mBAAmBC;AAAA,MACnB,cAAAP;AAAA,MACA,eAAAE;AAAA,MACA,WAAAL;AAAA,IAAA;AAAA,EAAA;AAGN;"}