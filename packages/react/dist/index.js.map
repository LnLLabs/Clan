{"version":3,"file":"index.js","sources":["../src/hooks/useWalletBalance.ts","../src/hooks/useWalletUtxos.ts","../src/hooks/useSendTransaction.ts","../src/hooks/useDelegateStake.ts","../src/hooks/useWalletDelegation.ts","../src/hooks/useWithdrawRewards.ts","../src/components/TransactionCreatorWithData.tsx","../src/components/WalletDelegationWithData.tsx"],"sourcesContent":["import { useQuery, UseQueryResult } from '@tanstack/react-query';\r\nimport { WalletInterface, Assets } from '@clan/framework-core';\r\n\r\nexport interface UseWalletBalanceOptions {\r\n  refetchInterval?: number;\r\n  enabled?: boolean;\r\n}\r\n\r\n/**\r\n * React Query hook for fetching and caching wallet balance\r\n * @param wallet - Wallet instance implementing WalletInterface\r\n * @param options - Configuration options\r\n * @returns React Query result with balance data\r\n */\r\nexport const useWalletBalance = (\r\n  wallet: WalletInterface,\r\n  options: UseWalletBalanceOptions = {}\r\n): UseQueryResult<Assets, Error> => {\r\n  const { refetchInterval = 10000, enabled = true } = options;\r\n  const walletId = wallet.getName(); // Derive from wallet\r\n\r\n  return useQuery({\r\n    queryKey: ['wallet', walletId, 'balance'],\r\n    queryFn: async () => {\r\n      return await wallet.getBalance();\r\n    },\r\n    refetchInterval,\r\n    enabled,\r\n  });\r\n};\r\n\r\n","import { useQuery, UseQueryResult } from '@tanstack/react-query';\r\nimport { WalletInterface, UTxO } from '@clan/framework-core';\r\n\r\nexport interface UseWalletUtxosOptions {\r\n  refetchInterval?: number;\r\n  enabled?: boolean;\r\n}\r\n\r\n/**\r\n * React Query hook for fetching and caching wallet UTXOs\r\n * @param wallet - Wallet instance implementing WalletInterface\r\n * @param options - Configuration options\r\n * @returns React Query result with UTXOs array\r\n */\r\nexport const useWalletUtxos = (\r\n  wallet: WalletInterface,\r\n  options: UseWalletUtxosOptions = {}\r\n): UseQueryResult<UTxO[], Error> => {\r\n  const { refetchInterval = 10000, enabled = true } = options;\r\n  const walletId = wallet.getName(); // Derive from wallet\r\n\r\n  return useQuery({\r\n    queryKey: ['wallet', walletId, 'utxos'],\r\n    queryFn: async () => {\r\n      return await wallet.getUtxos();\r\n    },\r\n    refetchInterval,\r\n    enabled,\r\n  });\r\n};\r\n\r\n","import { useMutation, useQueryClient, UseMutationResult } from '@tanstack/react-query';\nimport { WalletInterface } from '@clan/framework-core';\n\nexport interface SendTransactionParams {\n  recipientAddress: string;\n  assets: Record<string, bigint>;\n  options?: any;\n}\n\nexport interface SendTransactionResult {\n  txHash: string;\n  draft: any;\n  signedTx: any;\n}\n\nexport interface UseSendTransactionOptions {\n  onSuccess?: (data: SendTransactionResult) => void;\n  onError?: (error: Error) => void;\n}\n\n/**\n * React Query mutation hook for sending transactions\n * Automatically invalidates balance, UTXOs, and transaction cache on success\n * @param wallet - Wallet instance implementing WalletInterface\n * @param options - Configuration options\n * @returns React Query mutation result\n */\nexport const useSendTransaction = (\n  wallet: WalletInterface,\n  options: UseSendTransactionOptions = {}\n): UseMutationResult<SendTransactionResult, Error, SendTransactionParams> => {\n  const { onSuccess, onError } = options;\n  const walletId = wallet.getName(); // Derive from wallet\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ recipientAddress, assets, options: txOptions }: SendTransactionParams) => {\n      // Create transaction draft\n      const draft = await wallet.createTransaction(\n        [{ address: recipientAddress, assets }],\n        txOptions\n      );\n\n      // Sign transaction\n      const signedTx = await wallet.signTransaction(draft);\n\n      // Submit to blockchain\n      const txHash = await wallet.submitTransaction(signedTx);\n\n      return { txHash, draft, signedTx };\n    },\n\n    onSuccess: (data) => {\n      // Automatically invalidate related queries to trigger refetch\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'balance'] });\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'utxos'] });\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'transactions'] });\n\n      // Call custom success handler\n      onSuccess?.(data);\n    },\n\n    onError: (error: Error) => {\n      // Call custom error handler\n      onError?.(error);\n    },\n  });\n};\n\n","import { useMutation, useQueryClient, UseMutationResult } from '@tanstack/react-query';\r\nimport { WalletInterface } from '@clan/framework-core';\r\n\r\nexport interface DelegateStakeParams {\r\n  poolId: string;\r\n}\r\n\r\nexport interface DelegateStakeResult {\r\n  txHash: string;\r\n  poolId: string;\r\n}\r\n\r\nexport interface UseDelegateStakeOptions {\r\n  onSuccess?: (data: DelegateStakeResult) => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * React Query mutation hook for delegating stake to a pool\r\n * Automatically invalidates balance and delegation info on success\r\n * @param wallet - Wallet instance implementing WalletInterface\r\n * @param options - Configuration options\r\n * @returns React Query mutation result\r\n */\r\nexport const useDelegateStake = (\r\n  wallet: WalletInterface,\r\n  options: UseDelegateStakeOptions = {}\r\n): UseMutationResult<DelegateStakeResult, Error, DelegateStakeParams> => {\r\n  const { onSuccess, onError } = options;\r\n  const walletId = wallet.getName();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ poolId }: DelegateStakeParams) => {\r\n      if (!wallet.createDelegationTransaction) {\r\n        throw new Error('Wallet does not support delegation transactions');\r\n      }\r\n\r\n      // Create delegation transaction\r\n      const draft = await wallet.createDelegationTransaction(poolId);\r\n\r\n      // Sign transaction\r\n      const signedTx = await wallet.signTransaction(draft);\r\n\r\n      // Submit to blockchain\r\n      const txHash = await wallet.submitTransaction(signedTx);\r\n\r\n      return { txHash, poolId };\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      // Automatically invalidate related queries to trigger refetch\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'balance'] });\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'delegation'] });\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'transactions'] });\r\n\r\n      // Call custom success handler\r\n      onSuccess?.(data);\r\n    },\r\n\r\n    onError: (error: Error) => {\r\n      // Call custom error handler\r\n      onError?.(error);\r\n    },\r\n  });\r\n};\r\n\r\n","import { useQuery, UseQueryResult } from '@tanstack/react-query';\r\nimport { WalletInterface, DelegationInfo } from '@clan/framework-core';\r\n\r\nexport interface UseWalletDelegationOptions {\r\n  refetchInterval?: number;\r\n  enabled?: boolean;\r\n}\r\n\r\n/**\r\n * React Query hook for fetching and caching wallet delegation info\r\n * @param wallet - Wallet instance implementing WalletInterface\r\n * @param options - Configuration options\r\n * @returns React Query result with delegation info\r\n */\r\nexport const useWalletDelegation = (\r\n  wallet: WalletInterface,\r\n  options: UseWalletDelegationOptions = {}\r\n): UseQueryResult<DelegationInfo | undefined, Error> => {\r\n  const { refetchInterval = 30000, enabled = true } = options;\r\n  const walletId = wallet.getName();\r\n\r\n  return useQuery({\r\n    queryKey: ['wallet', walletId, 'delegation'],\r\n    queryFn: async () => {\r\n      if (!wallet.getDelegationInfo) {\r\n        return undefined;\r\n      }\r\n      return await wallet.getDelegationInfo();\r\n    },\r\n    refetchInterval,\r\n    enabled,\r\n  });\r\n};\r\n\r\n","import { useMutation, useQueryClient, UseMutationResult } from '@tanstack/react-query';\r\nimport { WalletInterface } from '@clan/framework-core';\r\n\r\nexport interface WithdrawRewardsResult {\r\n  txHash: string;\r\n  amount: bigint;\r\n}\r\n\r\nexport interface UseWithdrawRewardsOptions {\r\n  onSuccess?: (data: WithdrawRewardsResult) => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * React Query mutation hook for withdrawing staking rewards\r\n * Automatically invalidates balance and delegation info on success\r\n * @param wallet - Wallet instance implementing WalletInterface\r\n * @param options - Configuration options\r\n * @returns React Query mutation result\r\n */\r\nexport const useWithdrawRewards = (\r\n  wallet: WalletInterface,\r\n  options: UseWithdrawRewardsOptions = {}\r\n): UseMutationResult<WithdrawRewardsResult, Error, void> => {\r\n  const { onSuccess, onError } = options;\r\n  const walletId = wallet.getName();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async () => {\r\n      if (!wallet.withdrawRewards) {\r\n        throw new Error('Wallet does not support reward withdrawal');\r\n      }\r\n\r\n      // Get current delegation info to get reward amount\r\n      const delegationInfo = wallet.getDelegationInfo ? await wallet.getDelegationInfo() : undefined;\r\n      const amount = delegationInfo?.rewards || 0n;\r\n\r\n      // Create withdrawal transaction\r\n      const draft = await wallet.withdrawRewards();\r\n\r\n      // Sign transaction\r\n      const signedTx = await wallet.signTransaction(draft);\r\n\r\n      // Submit to blockchain\r\n      const txHash = await wallet.submitTransaction(signedTx);\r\n\r\n      return { txHash, amount };\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      // Automatically invalidate related queries to trigger refetch\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'balance'] });\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'delegation'] });\r\n      queryClient.invalidateQueries({ queryKey: ['wallet', walletId, 'transactions'] });\r\n\r\n      // Call custom success handler\r\n      onSuccess?.(data);\r\n    },\r\n\r\n    onError: (error: Error) => {\r\n      // Call custom error handler\r\n      onError?.(error);\r\n    },\r\n  });\r\n};\r\n\r\n","import React, { useState, useEffect } from 'react';\nimport { WalletInterface } from '@clan/framework-core';\nimport type { TransactionBuildOptions } from '@clan/framework-core';\nimport { \n  TransactionCreator, \n  UIAsset,\n  convertAssetsToAssetArray,\n  convertAssetsToAssetArraySync \n} from '@clan/framework-components';\nimport { useWalletBalance } from '../hooks/useWalletBalance';\nimport { useWalletUtxos } from '../hooks/useWalletUtxos';\n\n/**\n * Token metadata provider interface for enriching assets with metadata\n * Compatible with future BroClan metadata provider integration\n */\nexport interface TokenMetadataProvider {\n  getMetadata(assetId: string): Promise<Partial<Omit<UIAsset, 'id' | 'balance'>>>;\n}\n\nexport interface TransactionCreatorWithDataProps {\n  wallet: WalletInterface;\n  metadataProvider?: TokenMetadataProvider;\n  onTransactionCreated?: (options: TransactionBuildOptions) => void;\n  onCancel?: () => void;\n  className?: string;\n  refetchInterval?: number;\n}\n\n/**\n * Smart wrapper around TransactionCreator that automatically fetches wallet data\n * \n * @example\n * // Simple usage (no metadata)\n * <TransactionCreatorWithData \n *   wallet={wallet}\n *   onTransactionCreated={(tx) => console.log('Created!', tx)}\n * />\n * \n * @example\n * // With metadata provider (BroClan integration)\n * <TransactionCreatorWithData \n *   wallet={wallet}\n *   metadataProvider={broClanMetadataProvider}\n *   onTransactionCreated={(tx) => console.log('Created!', tx)}\n * />\n */\nexport const TransactionCreatorWithData: React.FC<TransactionCreatorWithDataProps> = ({\n  wallet,\n  metadataProvider,\n  refetchInterval = 10000,\n  ...props\n}) => {\n  const [availableAssets, setAvailableAssets] = useState<UIAsset[]>([]);\n  const [isEnrichingAssets, setIsEnrichingAssets] = useState(false);\n\n  // Auto-fetch wallet data with React Query\n  const { data: balance, isLoading: balanceLoading, error: balanceError } = useWalletBalance(wallet, {\n    refetchInterval,\n    enabled: true\n  });\n\n  const { data: utxos, isLoading: utxosLoading, error: utxosError } = useWalletUtxos(wallet, {\n    refetchInterval,\n    enabled: true\n  });\n\n  // Convert balance to Asset[] format with optional metadata enrichment\n  useEffect(() => {\n    if (!balance) return;\n\n    const enrichAssets = async () => {\n      setIsEnrichingAssets(true);\n      try {\n        if (metadataProvider) {\n          // Async enrichment with metadata provider\n          const enrichedAssets = await convertAssetsToAssetArray(\n            balance,\n            async (assetId) => {\n              try {\n                return await metadataProvider.getMetadata(assetId);\n              } catch (error) {\n                console.warn(`Failed to fetch metadata for ${assetId}:`, error);\n                return {};\n              }\n            }\n          );\n          setAvailableAssets(enrichedAssets);\n        } else {\n          // Sync conversion without metadata\n          const basicAssets = convertAssetsToAssetArraySync(balance);\n          setAvailableAssets(basicAssets);\n        }\n      } catch (error) {\n        console.error('Error enriching assets:', error);\n        // Fallback to basic assets\n        setAvailableAssets(convertAssetsToAssetArraySync(balance));\n      } finally {\n        setIsEnrichingAssets(false);\n      }\n    };\n\n    enrichAssets();\n  }, [balance, metadataProvider]);\n\n  // Loading state\n  if (balanceLoading || utxosLoading) {\n    return (\n      <div className=\"transaction-creator-loading\" style={{ padding: '2rem', textAlign: 'center' }}>\n        <div>Loading wallet data...</div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (balanceError || utxosError) {\n    return (\n      <div className=\"transaction-creator-error\" style={{ padding: '2rem', color: '#ef4444' }}>\n        <div>Error loading wallet data</div>\n        {balanceError && <div>{balanceError.message}</div>}\n        {utxosError && <div>{utxosError.message}</div>}\n      </div>\n    );\n  }\n\n  // No UTXOs available\n  if (!utxos || utxos.length === 0) {\n    return (\n      <div className=\"transaction-creator-no-utxos\" style={{ padding: '2rem', textAlign: 'center' }}>\n        <div>No funds available in wallet</div>\n      </div>\n    );\n  }\n\n  return (\n    <TransactionCreator\n      wallet={wallet}\n      availableUtxos={utxos}\n      availableAssets={availableAssets}\n      {...props}\n    />\n  );\n};\n\n","import React from 'react';\r\nimport { WalletDelegation, DelegationInfo as ComponentDelegationInfo } from '@clan/framework-components';\r\nimport { WalletInterface } from '@clan/framework-core';\r\nimport { useDelegateStake } from '../hooks/useDelegateStake';\r\nimport { useWalletDelegation } from '../hooks/useWalletDelegation';\r\nimport { useWithdrawRewards } from '../hooks/useWithdrawRewards';\r\n\r\nexport interface WalletDelegationWithDataProps {\r\n  wallet: WalletInterface;\r\n  onSuccess?: (action: 'delegate' | 'undelegate' | 'withdraw', data: any) => void;\r\n  onError?: (error: Error) => void;\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * Smart wrapper around WalletDelegation that automatically manages delegation state\r\n * Uses React Query hooks for data fetching and mutations\r\n * \r\n * @example\r\n * ```tsx\r\n * <WalletDelegationWithData \r\n *   wallet={wallet}\r\n *   onSuccess={(action, data) => {\r\n *     console.log(`${action} successful:`, data);\r\n *   }}\r\n *   onError={(error) => {\r\n *     console.error('Delegation error:', error);\r\n *   }}\r\n * />\r\n * ```\r\n */\r\nexport const WalletDelegationWithData: React.FC<WalletDelegationWithDataProps> = ({\r\n  wallet,\r\n  onSuccess,\r\n  onError,\r\n  className\r\n}) => {\r\n  // Fetch delegation info\r\n  const { data: delegationInfo, isLoading: delegationLoading } = useWalletDelegation(wallet, {\r\n    refetchInterval: 30000,\r\n    enabled: true\r\n  });\r\n\r\n  // Delegation mutation\r\n  const { mutateAsync: delegateStake, isPending: isDelegating } = useDelegateStake(wallet, {\r\n    onSuccess: (data: any) => {\r\n      console.log('Delegation successful:', data);\r\n      onSuccess?.('delegate', data);\r\n    },\r\n    onError: (error: Error) => {\r\n      console.error('Delegation failed:', error);\r\n      onError?.(error);\r\n    }\r\n  });\r\n\r\n  // Withdraw rewards mutation\r\n  const { mutateAsync: withdrawRewards, isPending: isWithdrawing } = useWithdrawRewards(wallet, {\r\n    onSuccess: (data: any) => {\r\n      console.log('Withdrawal successful:', data);\r\n      onSuccess?.('withdraw', data);\r\n    },\r\n    onError: (error: Error) => {\r\n      console.error('Withdrawal failed:', error);\r\n      onError?.(error);\r\n    }\r\n  });\r\n\r\n  // Convert DelegationInfo from core to component format\r\n  const componentDelegationInfo: ComponentDelegationInfo | undefined = delegationInfo ? {\r\n    stakeAddress: delegationInfo.stakeAddress,\r\n    delegatedPool: delegationInfo.delegatedPool,\r\n    rewards: delegationInfo.rewards,\r\n    activeEpoch: delegationInfo.activeEpoch,\r\n    nextRewardEpoch: delegationInfo.nextRewardEpoch\r\n  } : undefined;\r\n\r\n  // Handle delegation\r\n  const handleDelegate = async (poolId: string) => {\r\n    await delegateStake({ poolId });\r\n  };\r\n\r\n  // Handle undelegation (delegate to null pool or use specific undelegate method if available)\r\n  const handleUndelegate = async () => {\r\n    // Note: Implement based on your blockchain's undelegation mechanism\r\n    // For Cardano, you might need a specific undelegate transaction\r\n    console.log('Undelegate not yet implemented');\r\n    onError?.(new Error('Undelegate functionality not yet implemented'));\r\n  };\r\n\r\n  // Handle reward withdrawal\r\n  const handleWithdrawRewards = async () => {\r\n    await withdrawRewards();\r\n  };\r\n\r\n  if (delegationLoading) {\r\n    return <div className=\"delegation-loading\">Loading delegation info...</div>;\r\n  }\r\n\r\n  return (\r\n    <WalletDelegation\r\n      wallet={wallet}\r\n      delegationInfo={componentDelegationInfo}\r\n      onDelegate={handleDelegate}\r\n      onUndelegate={handleUndelegate}\r\n      onWithdrawRewards={handleWithdrawRewards}\r\n      isDelegating={isDelegating}\r\n      isWithdrawing={isWithdrawing}\r\n      className={className}\r\n    />\r\n  );\r\n};\r\n\r\nexport default WalletDelegationWithData;\r\n\r\n"],"names":["useWalletBalance","wallet","options","refetchInterval","enabled","walletId","useQuery","useWalletUtxos","useSendTransaction","onSuccess","onError","queryClient","useQueryClient","useMutation","recipientAddress","assets","txOptions","draft","signedTx","data","error","useDelegateStake","poolId","useWalletDelegation","useWithdrawRewards","delegationInfo","amount","TransactionCreatorWithData","metadataProvider","props","availableAssets","setAvailableAssets","useState","isEnrichingAssets","setIsEnrichingAssets","balance","balanceLoading","balanceError","utxos","utxosLoading","utxosError","useEffect","enrichedAssets","convertAssetsToAssetArray","assetId","basicAssets","convertAssetsToAssetArraySync","jsx","jsxs","TransactionCreator","WalletDelegationWithData","className","delegationLoading","delegateStake","isDelegating","withdrawRewards","isWithdrawing","componentDelegationInfo","handleDelegate","handleUndelegate","handleWithdrawRewards","WalletDelegation"],"mappings":"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"}