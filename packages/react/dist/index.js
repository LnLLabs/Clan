"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("@tanstack/react-query"),n=require("react/jsx-runtime"),f=require("react"),x=require("@clan/framework-components"),b=(e,s={})=>{const{refetchInterval:t=1e4,enabled:a=!0}=s,r=e.getName();return h.useQuery({queryKey:["wallet",r,"balance"],queryFn:async()=>await e.getBalance(),refetchInterval:t,enabled:a})},m=(e,s={})=>{const{refetchInterval:t=1e4,enabled:a=!0}=s,r=e.getName();return h.useQuery({queryKey:["wallet",r,"utxos"],queryFn:async()=>await e.getUtxos(),refetchInterval:t,enabled:a})},q=(e,s={})=>{const{onSuccess:t,onError:a}=s,r=e.getName(),i=h.useQueryClient();return h.useMutation({mutationFn:async({recipientAddress:c,assets:d,options:o})=>{const y=await e.createTransaction([{address:c,assets:d}],o),l=await e.signTransaction(y);return{txHash:await e.submitTransaction(l),draft:y,signedTx:l}},onSuccess:c=>{i.invalidateQueries({queryKey:["wallet",r,"balance"]}),i.invalidateQueries({queryKey:["wallet",r,"utxos"]}),i.invalidateQueries({queryKey:["wallet",r,"transactions"]}),t==null||t(c)},onError:c=>{a==null||a(c)}})},j=({wallet:e,metadataProvider:s,refetchInterval:t=1e4,...a})=>{const[r,i]=f.useState([]),[c,d]=f.useState(!1),{data:o,isLoading:y,error:l}=b(e,{refetchInterval:t,enabled:!0}),{data:g,isLoading:w,error:A}=m(e,{refetchInterval:t,enabled:!0});return f.useEffect(()=>{if(!o)return;(async()=>{d(!0);try{if(s){const u=await x.convertAssetsToAssetArray(o,async v=>{try{return await s.getMetadata(v)}catch(T){return console.warn(`Failed to fetch metadata for ${v}:`,T),{}}});i(u)}else{const u=x.convertAssetsToAssetArraySync(o);i(u)}}catch(u){console.error("Error enriching assets:",u),i(x.convertAssetsToAssetArraySync(o))}finally{d(!1)}})()},[o,s]),y||w?n.jsx("div",{className:"transaction-creator-loading",style:{padding:"2rem",textAlign:"center"},children:n.jsx("div",{children:"Loading wallet data..."})}):l||A?n.jsxs("div",{className:"transaction-creator-error",style:{padding:"2rem",color:"#ef4444"},children:[n.jsx("div",{children:"Error loading wallet data"}),l&&n.jsx("div",{children:l.message}),A&&n.jsx("div",{children:A.message})]}):!g||g.length===0?n.jsx("div",{className:"transaction-creator-no-utxos",style:{padding:"2rem",textAlign:"center"},children:n.jsx("div",{children:"No funds available in wallet"})}):n.jsx(x.TransactionCreator,{wallet:e,availableUtxos:g,availableAssets:r,...a})};exports.TransactionCreatorWithData=j;exports.useSendTransaction=q;exports.useWalletBalance=b;exports.useWalletUtxos=m;
//# sourceMappingURL=index.js.map
